{% extends 'base.html' %}
{% block title %}
    Payment Form
{% endblock %}

{% block script %}
    {% load static %}
    <!-- link to the SqPaymentForm library -->
    <script type="text/javascript" src="{{ paydict.pay_url }}"></script>

    <script type="application/javascript">
        window.applicationId = '{{ paydict.app_id }}';
        window.locationId = '{{ paydict.location_id }}';
    </script>

    <!-- link to the local SqPaymentForm initialization -->
    <script src="{% static 'js/sq-payment-form.js' %}"></script>

    <!-- link to the custom styles for SqPaymentForm -->
    <link rel="stylesheet" type="text/css" href="{% static 'sq-payment-form.css' %}">
{% endblock %}

{% block main %}
  <div class="row table_head border">
    <div class="col-md">
      <strong>Item</strong>
    </div>
    <div class="col-md">
      Quanity
    </div>
    <div class="col-md">
      <strong>Amount each</strong>
    </div>
    <div class="col-md">
      <strong>Amount</strong>
    </div>
  </div>

  {% for row in rows %}
    <div class="row table_row border border-top-0">
      <div class="col-md">
        {{ row.name }}
      </div>
      <div class="col-md">
        {{ row.quantity }}
      </div>
      <div class="col-md">
        {{ row.amount_each }}
      </div>
      <div class="col-md">
        {{ row.amount_total }}
      </div>
    </div>
  {% endfor %}

    <div class="row table_row border border-top-0">
      <div class="col-md">
        Total
      </div>
      <div class="col-md"></div>
      <div class="col-md"></div>
      <div class="col-md">
        {{ total }}
      </div>
    </div>
  <div class="row">
    Payments are processed with Square.
  </div>

  {% if bypass %}
    <div class="row">
      <form method="post" autocomplete="off" class="form">
        {% csrf_token %}
        <input type="hidden" id="bypass" name="bypass" value="">
          <button class="btn btn-primary m-2" type="submit" id="id_submit">Comp</button>
      </form>
    </div>
  {% endif %}

<!--     <form id="payment-form">-->
<!--       <div id="card-container"></div>-->
<!--       <button id="card-button" type="button">Pay $1.00</button>-->
<!--     </form>-->
        <form id="payment-form" novalidate action="/process_payment" method="post">
          {% csrf_token %}
          <input type="hidden" id="sq_token" name="sq_token" value="">
          <div id="card-container"></div>
          <button id="card-button" type="button"> Pay Now </button>
        </form>
    <div id="payment-status-container"></div>
  <div class="row">
    {% if bypass %}
<!--      <form id="form1" action="/process_payment" method="post" class="form" name="form1">-->
    <form method="post" autocomplete="off" class="form">
        {% csrf_token %}
        <input type="hidden" id="bypass" name="bypass" value="">
          <button class="btn btn-primary m-2" type="submit" id="id_submit">Bypass</button>
      </form>
    {% endif %}
  </div>

{% endblock %}
